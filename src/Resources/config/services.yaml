services:
  _defaults:
    public: false
    autowire: false
    autoconfigure: false

  PixelFederation\DoctrineResettableEmBundle\Connection\ConnectionsHandler:
    arguments:
      $aliveKeepers: ~ # will be added by the compiler pass if needed

  PixelFederation\DoctrineResettableEmBundle\DBAL\Connection\PlatformAliveKeeper:
    arguments:
      $registry: '@doctrine'
      $aliveKeepers: ~ # will be added by the compiler pass if needed

  PixelFederation\DoctrineResettableEmBundle\DBAL\Connection\OptimizedAliveKeeper:
    abstract: true
    arguments:
      $decorated: ~ # will be added by the compiler pass if needed

  PixelFederation\DoctrineResettableEmBundle\DBAL\Connection\PingingAliveKeeper:

  PixelFederation\DoctrineResettableEmBundle\DBAL\Connection\TransactionDiscardingAliveKeeper:
    abstract: true
    arguments:
      $decorated: ~ # will be provided by compiler pass
      $logger: '@logger'
    tags:
      - { name: monolog.logger, channel: doctrine-resettable-em-bundle }

  PixelFederation\DoctrineResettableEmBundle\DBAL\Connection\PassiveIgnoringAliveKeeper:
    abstract: true
    arguments:
      $decorated: ~ # will be provided by compiler pass

  PixelFederation\DoctrineResettableEmBundle\Redis\Cluster\Connection\PlatformAliveKeeper:
    arguments:
      $connections: ~ # will be provided by compiler pass
      $aliveKeepers: ~ # will be provided by compiler pass

  PixelFederation\DoctrineResettableEmBundle\Redis\Cluster\Connection\PingingAliveKeeper:
    abstract: true
    arguments:
      $constructorArguments: ~ # will be provided by compiler pass
      $logger: '@logger' # will be provided by compiler pass
    tags:
      - { name: monolog.logger, channel: doctrine-resettable-em-bundle }

  PixelFederation\DoctrineResettableEmBundle\Redis\Cluster\Connection\PassiveIgnoringAliveKeeper:
    abstract: true
    arguments:
      $decorated: ~ # will be provided by compiler pass

  PixelFederation\DoctrineResettableEmBundle\DBAL\Connection\FailoverAware\FailoverAwareAliveKeeper:
    abstract: true
    arguments:
      $logger: '@logger'
      $connectionType: ~ # will be provided by compiler pass
    tags:
      - { name: monolog.logger, channel: doctrine-resettable-em-bundle }

  PixelFederation\DoctrineResettableEmBundle\Redis\Cluster\Connection\OptimizedAliveKeeper:
    abstract: true
    arguments:
      $decorated: ~ # will be added by the compiler pass if needed

  PixelFederation\DoctrineResettableEmBundle\RequestCycle\Initializers:
    arguments: [!tagged 'pixelfederation_doctrine_resettable_em_bundle.app_initializer']
    tags:
      - {name: kernel.event_listener, event: kernel.request, method: initialize, priority: 1000000}
